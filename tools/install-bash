#!/usr/bin/env bash
# shellcheck disable=SC1090

set -o errexit
set -o nounset
set -o pipefail
[[ -n "${VERBOSE:+x}" ]] && set -o verbose
[[ -n "${DEBUG:-}" ]] && IS_DEBUG=true || IS_DEBUG=false

# GNU Mirror List: https://www.gnu.org/prep/ftp.html
MIRROR=https://gnu.freemirror.org
VERSION=$1
BASH_PREFIX=$TRAVIS_BUILD_DIR/build-bash

mkdir -p "$TRAVIS_BUILD_DIR/build-bash"
cd "$TRAVIS_BUILD_DIR/build-bash"
curl -O $MIRROR/gnu/bash/bash-"$VERSION".tar.gz
tar xzf bash-"$VERSION".tar.gz
cd "bash-$VERSION"
./configure --prefix="$BASH_PREFIX"
make
sudo make install
